<!--
<div id="langchooser"
     ng-show="model.modal == MODAL.welcome || model.modal == MODAL.settings">
  <ul class="pull-right">
    <li ng-repeat="(langKey, langVal) in LANG" ng-class="{active: lang() == langKey}"><a
        ng-click="lang() != langKey && changeSetting(SETTING.lang, langKey)"
        dir="{{ langVal.dir }}">{{ langVal.name }}</a></li>
    <li><a target="_blank" href="{{ EXTERNAL_URL.helpTranslate }}">{{ 'HELP_TRANSLATE' | i18n }}<sup><i class="icon-external-link"></i></sup></a></li>
  </ul>
</div>
-->

<div id="sanity" ng-controller="SanityCtrl" modal="show">
  <div class="modal-header">
    <h3>{{ 'UNEXPECTED_STATE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'UNEXPECTED_STATE_PROMPT' | i18n }}</div>
    <form>
      <p>
        <label class="checkbox inline">
          <input type="checkbox" ng-model="notifyLanternDevs">
          {{ 'NOTIFY_LANTERN_DEVS' | i18n }}
        </label>
      </p>
      <textarea class="bugReport" ng-disabled="!notifyLanternDevs"
        ng-model="bugReport" placeholder="{{ 'BUG_REPORT_PROMPT' | i18n }}">
      </textarea>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" ng-click="interaction(INTERACTION.reset, {notify: notifyLanternDevs})" class="btn btn-danger">{{ 'RESET' | i18n }}</button>
    <button type="button" ng-click="refresh()" class="btn btn-primary">{{ 'REFRESH' | i18n }}</button>
  </div>
</div>

<div id="settingsLoadFailure" modal="model.modal == MODAL.settingsLoadFailure">
  <div class="modal-header">
    <h3>{{ 'SETTINGS_LOAD_FAILURE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'SETTINGS_LOAD_FAILURE_PROMPT' | i18n }}</div>
    <form>
      <p>
        <label class="checkbox inline">
          <input type="checkbox" ng-model="notifyLanternDevs">
          {{ 'NOTIFY_LANTERN_DEVS' | i18n }}
        </label>
      </p>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" ng-click="interaction(INTERACTION.reset, {notify: notifyLanternDevs})" class="btn btn-danger">{{ 'RESET' | i18n }}</button>
    <button type="button" ng-click="interaction(INTERACTION.restart, {notify: notifyLanternDevs})" class="btn btn-primary">{{ 'RESTART' | i18n }}</button>
  </div>
</div>

<!-- setup screens -->

<div id="welcome" modal="model.modal == MODAL.welcome">
  <div class="modal-body">
    <img class="logo" src="img/logo.png" alt="{{ 'LANTERN' | i18n }}">
    <p>{{ 'TAG_LINE' | i18n }}</p>
    <p>
      <button type="button" ng-hide="inCensoringCountry" ng-click="interaction(MODE.give)"
        class="btn btn-large btn-{{inCensoringCountry && 'warning' || 'give-inverse' }}">
        <i ng-show="inCensoringCountry" class="icon-warning-sign"></i>
        {{ 'GIVE_ACCESS' | i18n }}</button>
      <button type="button" class="btn btn-large btn-get-inverse" ng-click="interaction(MODE.get)">{{ 'GET_ACCESS' | i18n }}</button>
    </p>
  </div>
</div>

<div id="authorize" modal="model.modal == MODAL.authorize">
  <div class="modal-header">
    <h3>{{ 'AUTHORIZE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>
      {{ 'AUTHORIZE_PROMPT' | i18n }}
      <small><a ng-click="helpExpanded=!helpExpanded"
                class="toggle">{{ 'WHY' | i18n }}</a></small>
    </div>
    <div class="prompt-extra noHeightWhenHidden" ui-toggle="helpExpanded">
      {{ 'AUTHORIZE_TIP_GTALK' | i18n }}
    </div>
  </div>
  <div class="modal-footer">
    <a class="btn btn-primary" href="{{ model.connectivity.gtalkOauthUrl }}" target="{{ model.mock && '_blank' || ''}}">
      {{ 'AUTHORIZE_LANTERN' | i18n }}
    </a>
  </div>
</div>

<div id="connecting" modal="model.modal == MODAL.connecting">
  <div class="modal-header">
    <h3>{{ 'CONNECTING_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <!-- XXX progress bar would be nice here -->
    <span ng-bind-html="model.connectivity.connectingStatus"></span>
  </div>
</div>

<div id="confirmReset" modal="model.modal == MODAL.confirmReset">
  <div class="modal-header">
    <h3>{{ 'CONFIRM_RESET_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'CONFIRM_RESET_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-click="interaction(INTERACTION.cancel)">{{ 'CANCEL' | i18n }}</button>
    <button type="button" class="btn btn-danger" ng-click="interaction(INTERACTION.reset)">{{ 'RESET' | i18n }}</button>
  </div>
</div>

<div id="giveModeForbidden" modal="model.modal == MODAL.giveModeForbidden">
  <div class="modal-header">
    <h3>{{ 'GIVE_MODE_FORBIDDEN_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'GIVE_MODE_FORBIDDEN_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-hide="model.setupComplete" ng-click="interaction(INTERACTION.cancel)">{{ 'BACK' | i18n }}</button>
    <button type="button" class="btn btn-primary btn-get-mode" ng-click="interaction(INTERACTION.continue)">{{ 'CONTINUE_IN_GET_MODE' | i18n }}</button>
  </div>
</div>

<div id="notInvited" modal="model.modal == MODAL.notInvited">
  <div class="modal-header">
    <h3>{{ 'NOT_INVITED_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'NOT_INVITED_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-click="interaction(INTERACTION.retry)">{{ 'TRY_ANOTHER_USER' | i18n }}</button>
    <!--<button type="button" class="btn" ng-click="interaction(INTERACTION.requestInvite)">{{ 'REQUEST_INVITE' | i18n }}</button>-->
  </div>
</div>

<!--
<div id="requestInvite" ng-controller="RequestInviteCtrl" modal="model.modal == MODAL.requestInvite">
  <div class="modal-header">
    <h3>{{ 'REQUEST_INVITE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'REQUEST_INVITE_PROMPT' | i18n }}</div>
    <form name="sendRequestForm" submit="sendRequest()">
      <label class="radio">
        <input type="radio" ng-disabled="disableForm"
               ng-model="sendToLanternDevs" ng-value="false">
        {{ 'SOMEONE_I_KNOW_LABEL' | i18n }}
      </label>
      <div class="control-extra">
        <input type="email" ng-required="!sendToLanternDevs"
               ng-disabled="disableForm || sendToLanternDevs"
               ng-model="sendRequestTo" placeholder="email@example.com">
        <div>{{ 'SOMEONE_I_KNOW_INFO' | i18n }}</div>
        XXX auto-complete from google contacts
        XXX "add a personal message"
      </div>
      <br>
      <label class="radio">
        <input type="radio" ng-disabled="disableForm" ng-model="sendToLanternDevs" ng-value="true"> {{ 'LANTERN_DEVS_LABEL' | i18n }}
      </label>
      <div class="control-extra">{{ 'LANTERN_DEVS_INFO' | i18n }}</div>
      <br>
      <div class="text-error" ui-toggle="requestError">
        {{ 'ERROR' | i18n }}&nbsp;
      </div>
      XXX need (hidden) submit input so pressing enter triggers form submission?
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-click="interaction(INTERACTION.cancel)" tabindex="-1">{{ 'CANCEL' | i18n }}</button>
    <button type="submit" class="btn btn-primary" ng-disabled="sendRequestForm.$invalid || disableForm" ng-click="requestInvite()">{{ submitButtonLabelKey | i18n }}</button>
  </div>
</div>

<div id="requestSent" modal="model.modal == MODAL.requestSent">
  <div class="modal-header">
    <h3>{{ 'REQUEST_SENT_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'REQUEST_SENT_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" ng-click="interaction(INTERACTION.continue)">{{ 'CONTINUE' | i18n }}</button>
  </div>
</div>

<div id="firstInviteReceived" modal="model.modal == MODAL.firstInviteReceived">
  <div class="modal-header">
    <h3>{{ 'FIRST_INVITE_RECEIVED_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'FIRST_INVITE_RECEIVED_INTRO' | i18n }}</div>
    <br>
    <div>
      XXX will we have this data?
      {{ 'FIRST_INVITE_RECEIVED_SENDER' | i18n }}
      <div class="centered">
        user@example.com ("Name here")
      </div>
    </div>
    <br>
    <div>{{ 'FIRST_INVITE_RECEIVED_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" ng-click="interaction(INTERACTION.continue)">{{ 'CONTINUE' | i18n }}</button>
  </div>
</div>
-->

<div id="systemProxy" ng-controller="SystemProxyCtrl" modal="model.modal == MODAL.systemProxy">
  <div class="modal-header">
    <h3>{{ 'SYSTEM_PROXY_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'SYSTEM_PROXY_PROMPT' | i18n }}</div>
    <br>
    <div class="control-group">
      <div class="controls">
        <label class="radio control-label">
          <input type="radio" ng-model="systemProxy" ng-value="true"
                 ng-disabled="disableForm">
          {{ 'SYSTEM_PROXY_TRUE' | i18n }}
        </label>
        <div class="control-extra">{{ 'AUTO_PROXY' | i18n }}</div>
      </div>
      <div class="controls">
        <label class="radio control-label">
          <input type="radio" ng-model="systemProxy" ng-value="false"
                 ng-disabled="disableForm">
          {{ 'SYSTEM_PROXY_FALSE' | i18n }}
        </label>
        <div class="control-extra">
          {{ 'PAC_FILE_LOC' | i18n }}
          <strong>{{ model.connectivity.pacUrl }}</strong>
        </div>
      </div>
    </div>
    <div class="text-error" ui-toggle="sysproxyError">
      {{ 'SYSTEM_PROXY_ERROR' | i18n }}&nbsp;
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" ng-click="continue()"
            ng-disabled="disableForm">
      {{ submitButtonLabelKey | i18n }}
    </button>
  </div>
</div>

<div id="proxiedSites" ng-controller="ProxiedSitesCtrl" modal="model.modal == MODAL.proxiedSites">
  <div class="modal-header">
    <h3>
      <i class="lsf-icon lsf-web"></i>
      {{ 'PROXIED_SITES_TITLE' | i18n }}
    </h3>
  </div>
  <div class="modal-body">
    <div class="prompt">{{ 'PROXIED_SITES_PROMPT' | i18n }}</div>
    <div class="warning" ui-toggle="model.settings.proxyAllSites">
      <i class="icon icon-warning-sign"></i>
      {{ 'PROXYING_ALL_WARNING' | i18n }}
      <a ng-click="changeSetting(SETTING.proxyAllSites, false)">
        {{ 'DISABLE_PROXY_ALL' | i18n }}
      </a>
    </div>
    <div>
      <label>
        {{ 'CONFIGURE_PROXIED_SITES' | i18n }}
      </label>
      <form name="proxiedSitesForm">
        <textarea ng-model="input" name="input" placeholder="example.com" required
          ng-disabled="model.settings.proxyAllSites"
          ui-validate="validate" ng-disabled="updating"
          dir="ltr" tabindex="1"></textarea>
      </form>
    </div>
    <div class="tip" ui-toggle="!model.settings.proxyAllSites">
      <i class="icon-info-sign"></i>
      {{ 'PROXIED_SITES_TIP' | i18n }}
    </div>
    <div class="error" ui-toggle="errorLabelKey">
      {{ errorLabelKey | i18n }}
      <pre class="errorCause" ng-show="!!errorCause">{{ errorCause }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-disabled="updating" ng-click="handleReset()" tabindex="3">{{ 'RESET' | i18n }}</button>
    <button type="button" class="btn btn-primary" tabindex="2"
            ng-disabled="updating || proxiedSitesForm.$invalid"
            ng-click="handleContinue()">{{ submitButtonLabelKey | i18n }}</button>
  </div>
</div>

<div id="lanternFriends" ng-controller="LanternFriendsCtrl" modal="model.modal == MODAL.lanternFriends">
  <div class="modal-header">
    <h3>
      <i class="lsf-icon lsf-friends"></i>
      {{ 'LANTERN_FRIENDS' | i18n }}
    </h3>
  </div>
  <div class="modal-body">
    <div>
      <p>{{ 'LANTERN_FRIENDS_INTRO' | i18n }}</p>
      <!-- <p class="small">{{ 'ROSTER_PROMPT' | i18n }}</p> -->
    </div>

    <div ng-show="model.friends.pending.length" class="centered">
      <h4>
        {{ 'PENDING_REQS_PROMPT' | i18n:model.friends.pending.length }}
      </h4>
      <ul class="contactList-horizontal">
        <!-- http://microformats.org/wiki/hcard -->
        <li class="vcard" ng-repeat="contact in model.friends.pending">
          <img class="photo pull-left" ng-src="{{ contact.picture }}">
          <div class="fn" title="{{ contact.name }}" ng-class="{gray: !contact.name}">{{ contact.name || ('NO_NAME' | i18n) }}</div><!-- XXX text direction -->
          <div class="email small" title="{{ contact.email }}" ng-class="{gray: !contact.email}" dir="ltr">{{ contact.email || ('NO_EMAIL' | i18n) }}</div>
          <div class="btn-group">
            <button type="button" class="btn btn-mini btn-success" ng-click="interaction(INTERACTION.accept, contact)">{{ 'ACCEPT' | i18n }}</button>
            <button type="button" class="btn btn-mini btn-danger" ng-click="interaction(INTERACTION.decline, contact)">{{ 'DECLINE' | i18n }}</button>
          </div>
        </li>
      </ul>
      <p class="smaller">{{ 'PENDING_REQS_INFO' | i18n }}</p>
    </div>
    <hr ng-show="model.friends.pending.length">

    <div id="currentFriends">
      <div ng-hide="model.friends.current.length" class="centered smaller">{{ 'NO_FRIENDS' | i18n }}</div>

      <h4 class="centered" ng-show="model.friends.current.length">
        <span ng-show="model.friends.current.length">{{ model.friends.current.length }}</span>
        {{ 'LANTERN_FRIENDS_COLON' | i18n }}
      </h4>
      <ul ng-show="model.friends.current.length" class="contactList-horizontal centered">
        <!-- http://microformats.org/wiki/hcard -->
        <li class="vcard" ng-repeat="contact in model.friends.current">
          <img class="photo pull-left" ng-src="{{ contact.picture }}">
          <div class="fn" title="{{ contact.name }}" ng-class="{gray: !contact.name}">{{ contact.name || ('NO_NAME' | i18n) }}</div><!-- XXX text direction -->
          <div class="email small" title="{{ contact.email }}" ng-class="{gray: !contact.email}" dir="ltr">{{ contact.email || ('NO_EMAIL' | i18n) }}</div>
        </li>
      </ul>
      <hr>
    </div>

    <form class="inviteForm" name="inviteForm" ng-show="model.ninvites"
          ng-class="{invalid: !valid()}">
      <h4>{{ 'INVITE_FRIENDS_PROMPT' | i18n }}</h4>
      <input type="hidden" ng-model="invitees"
             ui-select2="selectInvitees" class="selectContacts"
             data-placeholder="email@example.com, email@example.com, ...">
      <div>{{ 'INVITES_REMAINING' | i18n:model.ninvites }}</div>
    </form>
    <div class="centered">
      <div ng-hide="model.ninvites">{{ 'NO_INVITES' | i18n }}</div>
      <div class="smaller">{{ 'MORE_INVITES' | i18n }}</div>
    </div>
  </div>
  <div class="modal-footer">
    <button id="inviteButton" class="btn btn-success"
      ng-show="invitees.length" ng-disabled="!valid()"
      ng-click="invite()">{{ 'SEND_INVITES' | i18n:invitees.length }}</button>
    <button type="button" class="btn btn-primary" ng-hide="invitees.length"
      ng-click="interaction(INTERACTION.continue)">{{ 'CONTINUE' | i18n }}</button>
  </div>
</div>

<div id="finished" ng-init="autoReport = true" modal="model.modal == MODAL.finished">
  <div class="modal-header">
    <h3>{{ 'FINISHED_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'FINISHED_PROMPT' | i18n }}</div>
    <br>
    <form class="form-inline">
      <label class="checkbox inline" style="margin:0"><!-- XXX inline style -->
        <input type="checkbox" ng-model="autoReport"
               ng-change="changeSetting(SETTING.autoReport, autoReport)">
        <small>{{ 'AUTOREPORT_ENABLE' | i18n }}</small>
      </label>
      <label class="checkbox inline" style="margin:0"><!-- XXX inline style -->
        <a rel="tooltip" ui-jq="tooltip" data-original-title="{{ 'AUTOREPORT_PROMPT' | i18n }}">
          <i class="icon-question-sign"></i>
        </a>
      </label>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary btn-{{ model.settings.mode }}-mode"
            ng-click="interaction(INTERACTION.continue)">{{ 'FINISH' | i18n }}</button>
  </div>
</div>

<div id="contact" ng-controller="ContactCtrl" modal="show">
  <div class="modal-header">
    <h3>{{ 'CONTACT_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div class="smaller">{{ 'CONTACT_PROMPT' | i18n }}</div>
    <form name="contactForm">
      <textarea id="contact-msg" name="contactMsg" ng-model="message" autofocus
        ng-maxlength="500000" required></textarea><!-- XXX https://github.com/angular/angular.js/pull/1588 -->
      <div class="text-error" ui-toggle="contactForm.contactMsg.$error.maxlength">
        {{ 'ERROR_TOO_LONG' | i18n:(contactForm.contactMsg.$viewValue.length - 500000) }}&nbsp;
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn"
            ng-click="interaction(INTERACTION.cancel)">{{ 'CANCEL' | i18n }}</button>
    <button type="button" class="btn btn-primary"
            ng-disabled="contactForm.contactMsg.$invalid || contactForm.contactMsg.$pristine"
            ng-click="interaction(INTERACTION.continue, {message: message})">{{ 'SEND' | i18n }}</button>
  </div>
</div>

<!-- XXX i18n -->
<div id="about" modal="model.modal == MODAL.about">
  <div class="modal-body">
    <div style="text-align:center; margin:0">
      Lantern version {{ model.version.installed | version:true }}<br>
      Frontend version {{ versionFrontend }}<br>
      <span class="smaller">
        <a href="https://www.getlantern.org/news" target="_blank">News</a> ·
        <a href="https://groups.google.com/group/lantern-users-en" target="_blank">Forums</a> ·
        <a href="https://github.com/getlantern/lantern/wiki" target="_blank">Docs</a> ·
        <a href="https://github.com/getlantern/lantern" target="_blank">Developers</a>
      </span>
    </div>
    <div>
      Credits
      <textarea readonly rows="1" style="text-align:center;word-spacing:15px">myleshorton _pants aranhoide leahxschmidt ghostdance forkner messier</textarea>
    </div>
    <div>
      Privacy
      <textarea readonly rows="3">Lantern takes the responsibility of providing internet access very seriously. We have an explicit interest in keeping any personally identifiable information routed through Lantern servers and clients limited, secret, and ephemeral. All Lantern software and infrastructure has been configured with strong security protections and data expungement policies in accordance with that interest. For more information, please see https://github.com/getlantern/lantern/wiki/Privacy.</textarea>
    </div>
    <div>
      License
      <textarea readonly rows="4">This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License (GPL) as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version. The full text of version 3 of the GPL can be found in the file LICENSE.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</textarea>
    </div>
    <!-- XXX https://en.wikipedia.org/wiki/Copyright#Obtaining_and_enforcing_copyright -->
    <div class="smaller gray centered" style="margin:0">© 2013 Team Lantern.</div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" ng-click="interaction(INTERACTION.close)">{{ 'CLOSE' | i18n }}</button>
  </div>
</div>

<div id="updateAvailable" modal="model.modal == MODAL.updateAvailable">
  <div class="modal-header">
    <h3>{{ 'UPDATE_AVAILABLE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <p>{{ 'UPDATE_AVAILABLE_PROMPT' | i18n }}</p>
    <details open id="latestDetails">
      <summary>{{ 'VERSION' | i18n }} {{ model.version.latest | version }}</summary>
      <dl class="dl-horizontal">
        <dt>{{ 'RELEASED' | i18n }}</dt>
        <dd><time>{{ model.version.latest.releaseDate }}</time></dd>
        <dt>{{ 'URL' | i18n }}</dt>
        <dd><a href="{{ model.version.latest.installerUrl }}">{{ model.version.latest.installerUrl }}</a></dd>
        <dt>{{ 'SHA1' | i18n }}</dt>
        <dd>{{ model.version.latest.installerSHA1 }}</dd>
        <dt>{{ 'MORE_INFO' | i18n }}</dt>
        <dd><a href="{{ model.version.latest.infoUrl }}">{{ model.version.latest.infoUrl }}</a></dd>
      </dl>
    </details>
    <p class="smaller indented">{{ 'UPDATE_AVAILABLE_PROMPT_RUNNING' | i18n }}
      {{ 'VERSION' | i18n }} {{ model.version.installed | version }},
      {{ 'RELEASED' | i18n }} <time>{{ model.version.installed.releaseDate }}.</time></p><!-- XXX i18n -->
    <br>
    <p class="indented">{{ 'UPDATE_PROMPT' | i18n }}</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-click="interaction(INTERACTION.close)">{{ 'CLOSE' | i18n }}</button>
    <a class="btn btn-primary" href="{{ model.version.latest.installerUrl }}">{{ 'DOWNLOAD' | i18n }}</a>
  </div>
</div>

<div id="settings" ng-controller="SettingsCtrl" modal="model.modal == MODAL.settings">
  <div class="modal-header">
    <h3>
      <i class="lsf-icon lsf-gear"></i>
      {{ 'SETTINGS' | i18n }}
    </h3>
  </div>
  <div class="modal-body">
    <dl class="dl-horizontal">
      <dt ng-hide="inCensoringCountry">{{ 'MODE' | i18n }}</dt>
      <dd ng-hide="inCensoringCountry">
        <div class="btn-group">
          <button type="button" class="btn btn-mini btn-give"
                  ng-class="{active: inGiveMode}"
                  ng-disabled="inGiveMode"
                  ng-click="interaction(MODE.give)">
                  <i ng-show="inCensoringCountry" class="icon-warning-sign"></i>
                  {{ 'GIVE_ACCESS' | i18n }}
          </button>
          <button type="button" class="btn btn-mini btn-get"
                  ng-class="{active: inGetMode}"
                  ng-disabled="inGetMode"
                  ng-click="interaction(MODE.get)">
                  {{ 'GET_ACCESS' | i18n }}
          </button>
        </div>
      </dd>

      <dt>{{ 'APP' | i18n }}</dt>
      <dd id="app-settings">
        <label class="checkbox">
          <input type="checkbox" ng-model="runAtSystemStart"
                 ng-click="changeSetting(SETTING.runAtSystemStart, runAtSystemStart)">
          {{ 'AUTO_START' | i18n }}
        </label>

        <div>
          <label class="checkbox inline" style="margin-top:-7px"><!-- XXX inline style -->
            <input type="checkbox" ng-model="autoReport"
                   ng-click="changeSetting(SETTING.autoReport, autoReport)">
            {{ 'AUTOREPORT_ENABLE' | i18n }}
          </label>
          <!-- XXX space between label and anchor inconsistent between ubuntu and os x -->
          <a rel="tooltip" ui-jq="tooltip" data-original-title="{{ 'AUTOREPORT_PROMPT' | i18n }}">
            <i class="icon-question-sign"></i>
          </a>
        </div>

        <div id="autoreport-warning" ui-toggle="!model.settings.autoReport"
             class="noHeightWhenHidden">
          <i class="icon-exclamation-sign"></i>
          <small>{{ 'NO_AUTOREPORT_WARNING' | i18n }}</small>
        </div>
      </dd>

      <dt ui-toggle="inGetMode" class="noHeightWhenHidden">{{ 'PROXY' | i18n }}</dt>
      <dd ui-toggle="inGetMode" class="noHeightWhenHidden" id="proxy-settings">
        <button type="button" class="btn btn-mini"
                ng-click="interaction(INTERACTION.proxiedSites)">
          <!--i class="lsf-icon lsf-web"></i-->
          {{ 'MANAGE_PROXIED_SITES' | i18n }}
        </button>
        <br>
        <details ng-open="model.settings.proxyAllSites || !model.settings.systemProxy"><!-- XXX will work upon upgrading to an angular version https://github.com/angular/angular.js/commit/b8bd4d5 has landed in -->
          <summary class="small">{{ 'ADVANCED' | i18n }}</summary>
          <div>
            <label class="checkbox inline" style="margin-top:-9px"><!-- XXX inline style -->
              <input type="checkbox" ng-model="proxyAllSites"
                     ng-click="changeSetting(SETTING.proxyAllSites, proxyAllSites)">
                {{'PROXY_ALL_TRAFFIC' | i18n }}
            </label>
            <!-- XXX space between label and anchor inconsistent between ubuntu and os x -->
            <a rel="tooltip" ui-jq="tooltip" data-original-title="{{ 'PROXIED_SITES_PROMPT' | i18n }}"><i class="icon icon-question-sign" style="font-size: 14px"></i></a><!-- XXX inline style -->
          </div>
          <div>
            <label class="checkbox">
              <input type="checkbox" ng-model="systemProxy"
                     ng-click="changeSetting(SETTING.systemProxy, systemProxy)">
              {{ 'SET_AS_SYSTEM_PROXY' | i18n }}
            </label>
            <div class="indented noHeightWhenHidden" ui-toggle="!systemProxy">
              <i class="icon-info-sign"></i>
              {{ 'PAC_FILE_LOC' | i18n }}
              <strong>{{ model.connectivity.pacUrl }}</strong>
            </div>
          </div>
        </details>
      </dd>
    </dl>
  </div>
  <div class="modal-footer">
    <button type="button" ng-click="interaction(INTERACTION.reset)"
            class="btn btn-mini pull-left">
      <i class="icon-warning-sign warning-colored"></i>
      {{ 'RESET_ELLIPSIS' | i18n }}
    </button>
    <button type="button" class="btn btn-primary" ng-click="interaction(INTERACTION.close)">{{ 'CLOSE' | i18n }}</button>
  </div>
</div>

<div id="scenarios" ng-controller="ScenariosCtrl" modal="model.modal == MODAL.scenarios">
  <div class="modal-header centered">
    <h3>Developer</h3>
  </div>
  <div class="modal-body">
    <p class="centered text-error">{{ model.mock.scenarios.prompt }}</p>
    <label>Applied scenarios:</label>
    <select ui-select2 multiple ng-model="appliedScenarios"
            placeholder="Choose applied scenarios" required style="width: 530px">
      <optgroup ng-repeat="(group, scenarios) in model.mock.scenarios.all" label="{{ group }}">
        <option ng-repeat="(key, scen) in scenarios" value="{{ group }}.{{ key }}">{{ scen.desc }}</option>
      </optgroup>
    </select> 
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" ng-click="interaction(INTERACTION.cancel)">Cancel</button>
    <button type="button" class="btn btn-primary" ng-click="submit()"
      disabled>Continue</button><!-- XXX have to fix on backend -->
  </div>
</div>
