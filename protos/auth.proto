syntax = "proto3";


message UserResponse {
  int64 legacyID = 1;
  string legacyToken = 2;
  string id = 3;
  bool emailConfirmed = 4;
  message Device {
    string id = 1;
    string name = 2;
    int64 created = 3;
  }
  message UserData {
    int64 userId = 1;
    string code = 2;
    string token = 3;
    string referral = 4;
    string phone = 5 [deprecated = true]; // not used anymore
    string email = 6;
    string userStatus = 7;
    string userLevel = 8;
    string locale = 9;
    int64 expiration = 10;
    repeated string servers = 11;
    string subscription = 12;
    repeated string purchases = 13;
    string bonusDays = 14;
    string bonusMonths = 15;
    repeated string inviters = 16;
    repeated string invitees = 17;
    repeated Device devices = 18;
    bool yinbiEnabled = 19;
    message SubscriptionData {
      string subscriptionID = 1;
      string planID = 2;
      string stripeCustomerID = 3;
      string status = 4;
      string cancellationReason = 5;
      int64 createdAt = 6;
      int64 startAt = 7;
      int64 endAt = 8;
      int64 cancelledAt = 9;
      bool autoRenew = 10;
      string provider = 11;
    }

    SubscriptionData subscriptionData = 20;
    string deviceID = 21;
  }
  bool Success = 5;
  // this maps to /user-data call in pro-server and is returned only on successful login
  UserData legacyUserData = 6;
  // list of current user devices. returned only on successful login that is blocked by 'too many devices'
  repeated Device devices = 7;
}

message Purchase  {
  string plan = 1;
}