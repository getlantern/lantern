if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(t){function ha(d){var g=d.indexOf(":");return g<0?d:{space:t.ns[d.substring(0,g)],local:d.substring(g+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function Y(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function Z(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function aa(d,g){if(d.row>g.row){var a=d;d=g;g=a}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function ea(d,g,a,l,e){a=Math.max(a,Math.floor(g.y0));
l=Math.min(l,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var c=d;d=g;g=c}c=d.dx/d.dy;var f=g.dx/g.dy,j=d.dx>0,u=g.dx<0;for(a=a;a<l;a++){var n=c*Math.max(0,Math.min(d.dy,a+j-d.y0))+d.x0;e(Math.floor(f*Math.max(0,Math.min(g.dy,a+u-g.y0))+g.x0),Math.ceil(n),a)}}function fa(d,g,a,l,e,c){var f=aa(d,g);g=aa(g,a);d=aa(a,d);if(f.dy>g.dy){a=f;f=g;g=a}if(f.dy>d.dy){a=f;f=d;d=a}if(g.dy>d.dy){a=g;g=d;d=a}f.dy&&ea(d,f,l,e,c);g.dy&&ea(d,g,l,e,c)}t.version="2.5.1";
var $={x:0,y:0};t.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};t.id=function(){var d=0;return function(){return++d}}();t.svg=function(d){return document.createElementNS(t.ns.svg,d)};t.transform=function(d,g,a,l,e,c){var f={},j,u,n;if(!arguments.length){d=1;g=e=a=0;l=1;c=0}f.zoomFraction=function(k){if(!arguments.length)return u;u=k;j=Math.floor(u+Math.log(Math.sqrt(d*d+g*g+a*a+l*l))/Math.LN2);n=Math.pow(2,-j);return f};f.apply=function(k){var h=Math.pow(2,-k.zoom),q=
Math.pow(2,k.zoom-j);return{column:(d*k.column*h+a*k.row*h+e)*q,row:(g*k.column*h+l*k.row*h+c)*q,zoom:k.zoom-j}};f.unapply=function(k){var h=Math.pow(2,-k.zoom),q=Math.pow(2,k.zoom+j);return{column:(k.column*h*l-k.row*h*a-e*l+c*a)/(d*l-g*a)*q,row:(k.column*h*g-k.row*h*d-e*g+c*d)/(a*g-l*d)*q,zoom:k.zoom+j}};f.toString=function(){return"matrix("+[d*n,g*n,a*n,l*n].join(" ")+" 0 0)"};return f.zoomFraction(0)};t.cache=function(d,g){function a(h){k--;g&&g(h);delete f[h.key];if(h.next)h.next.prev=h.prev;
else if(u=h.prev)u.next=null;if(h.prev)h.prev.next=h.next;else if(j=h.next)j.prev=null}function l(){for(var h=u;k>n;h=h.prev){if(!h)break;h.lock||a(h)}}var e={},c={},f={},j=null,u=null,n=64,k=0;e.peek=function(h){return f[[h.zoom,h.column,h.row].join("/")]};e.load=function(h,q){var w=[h.zoom,h.column,h.row].join("/"),A=f[w];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else u=A.prev;A.prev=null;A.next=j;j=j.prev=A}A.lock=1;return c[w]=A}A={key:w,column:h.column,row:h.row,zoom:h.zoom,next:j,
prev:null,lock:1};d.call(null,A,q);c[w]=f[w]=A;if(j)j.prev=A;else u=A;j=A;k++;return A};e.unload=function(h){if(!(h in c))return false;var q=c[h];q.lock=0;delete c[h];q.request&&q.request.abort(false)&&a(q);return q};e.locks=function(){return c};e.size=function(h){if(!arguments.length)return n;n=h;l();return e};e.flush=function(){l();return e};e.clear=function(){for(var h in f){var q=f[h];q.request&&q.request.abort(false);g&&g(f[h]);if(q.lock){q.lock=0;q.element.parentNode.removeChild(q.element)}}c=
{};f={};j=u=null;k=0;return e};return e};t.url=function(d){function g(e){var c=e.zoom<0?1:1<<e.zoom,f=e.column;if(l){f=e.column%c;if(f<0)f+=c}else if(f<0||f>=c)return null;return d.replace(/{(.)}/g,function(j,u){switch(u){case "S":return a[(Math.abs(e.zoom)+e.row+f)%a.length];case "Z":return e.zoom;case "X":return f;case "Y":return e.row;case "B":var n=t.map.coordinateLocation({row:e.row,column:f,zoom:e.zoom}),k=t.map.coordinateLocation({row:e.row+1,column:f+1,zoom:e.zoom}),h=Math.ceil(Math.log(e.zoom)/
Math.LN2);return k.lat.toFixed(h)+","+n.lon.toFixed(h)+","+n.lat.toFixed(h)+","+k.lon.toFixed(h)}return u})}var a=[],l=true;g.template=function(e){if(!arguments.length)return d;d=e;return g};g.hosts=function(e){if(!arguments.length)return a;a=e;return g};g.repeat=function(e){if(!arguments.length)return l;l=e;return g};return g};t.dispatch=function(d){var g={};d.on=function(a,l){for(var e=g[a]||(g[a]=[]),c=0;c<e.length;c++)if(e[c].handler==l)return d;e.push({handler:l,on:true});return d};d.off=function(a,
l){var e=g[a];if(e)for(var c=0;c<e.length;c++){var f=e[c];if(f.handler==l){f.on=false;e.splice(c,1);break}}return d};return function(a){var l=g[a.type];if(l){l=l.slice();for(var e=0;e<l.length;e++){var c=l[e];c.on&&c.handler.call(d,a)}}}};t.queue=function(){function d(){if(!(e>=c||!l.length)){e++;l.pop()()}}function g(f){for(var j=0;j<l.length;j++)if(l[j]==f){l.splice(j,1);return true}return false}function a(f,j,u){function n(){k=new XMLHttpRequest;u&&k.overrideMimeType&&k.overrideMimeType(u);k.open("GET",
f,true);k.onreadystatechange=function(){if(k.readyState==4){e--;k.status<300&&j(k);d()}};k.send(null)}var k;l.push(n);d();return{abort:function(h){if(g(n))return true;if(h&&k){k.abort();return true}return false}}}var l=[],e=0,c=6;return{text:function(f,j,u){return a(f,function(n){n.responseText&&j(n.responseText)},u)},xml:function(f,j){return a(f,function(u){u.responseXML&&j(u.responseXML)},"application/xml")},json:function(f,j){return a(f,function(u){u.responseText&&j(JSON.parse(u.responseText))},
"application/json")},image:function(f,j,u){function n(){k=document.createElement("img");k.onerror=function(){e--;d()};k.onload=function(){e--;u(k);d()};k.src=j;f.setAttributeNS(t.ns.xlink,"href",j)}var k;l.push(n);d();return{abort:function(h){if(g(n))return true;if(h&&k){k.src="about:";return true}return false}}}}}();t.map=function(){function d(){if(q)if(n<q[0])n=q[0];else if(n>q[1])n=q[1];k=n-(n=Math.round(n));h=Math.pow(2,k)}function g(){if(r){var i=45/Math.pow(2,n+k-3),o=Math.max(Math.abs(D*f.x+
A*f.y),Math.abs(C*f.x+F*f.y)),s=Y(L-o*i/j.y);o=Y(m+o*i/j.y);u.lat=Math.max(s,Math.min(o,u.lat));s=Math.max(Math.abs(D*f.y+A*f.x),Math.abs(C*f.y+F*f.x));u.lon=Math.max(r[0].lon-s*i/j.x,Math.min(r[1].lon+s*i/j.x,u.lon))}}var a={},l,e,c=$,f=$,j={x:256,y:256},u={lat:37.76487,lon:-122.41948},n=12,k=0,h=1,q=[1,18],w=0,A=1,D=0,F=1,C=0,L=-180,m=180,r=[{lat:Y(L),lon:-Infinity},{lat:Y(m),lon:Infinity}];a.locationCoordinate=function(i){i=t.map.locationCoordinate(i);var o=Math.pow(2,n);i.column*=o;i.row*=o;i.zoom+=
n;return i};a.coordinateLocation=t.map.coordinateLocation;a.coordinatePoint=function(i,o){var s=Math.pow(2,n-o.zoom),z=Math.pow(2,n-i.zoom),B=(o.column*s-i.column*z)*j.x*h;s=(o.row*s-i.row*z)*j.y*h;return{x:f.x+A*B-D*s,y:f.y+D*B+A*s}};a.pointCoordinate=function(i,o){var s=Math.pow(2,n-i.zoom),z=(o.x-f.x)/h,B=(o.y-f.y)/h;return{column:i.column*s+(F*z-C*B)/j.x,row:i.row*s+(C*z+F*B)/j.y,zoom:n}};a.locationPoint=function(i){var o=Math.pow(2,n+k-3)/45,s=(i.lon-u.lon)*o*j.x;i=(Z(u.lat)-Z(i.lat))*o*j.y;
return{x:f.x+A*s-D*i,y:f.y+D*s+A*i}};a.pointLocation=function(i){var o=45/Math.pow(2,n+k-3),s=(i.x-f.x)*o;i=(i.y-f.y)*o;return{lon:u.lon+(F*s-C*i)/j.x,lat:Y(Z(u.lat)-(C*s+F*i)/j.y)}};var v=t.svg("rect");v.setAttribute("visibility","hidden");v.setAttribute("pointer-events","all");a.container=function(i){if(!arguments.length)return l;l=i;l.setAttribute("class","map");l.appendChild(v);return a.resize()};a.focusableParent=function(){for(var i=l;i;i=i.parentNode)if(i.tabIndex>=0)return i;return window};
a.mouse=function(i){var o=(l.ownerSVGElement||l).createSVGPoint();if(ba<0&&(window.scrollX||window.scrollY)){var s=document.body.appendChild(t.svg("svg"));s.style.position="absolute";s.style.top=s.style.left="0px";var z=s.getScreenCTM();ba=!(z.f||z.e);document.body.removeChild(s)}if(ba){o.x=i.pageX;o.y=i.pageY}else{o.x=i.clientX;o.y=i.clientY}return o.matrixTransform(l.getScreenCTM().inverse())};a.size=function(i){if(!arguments.length)return c;e=i;return a.resize()};a.resize=function(){if(e){c=e;
S.remove(a)}else{v.setAttribute("width","100%");v.setAttribute("height","100%");b=v.getBBox();c={x:b.width,y:b.height};S.add(a)}v.setAttribute("width",c.x);v.setAttribute("height",c.y);f={x:c.x/2,y:c.y/2};g();a.dispatch({type:"resize"});return a};a.tileSize=function(i){if(!arguments.length)return j;j=i;a.dispatch({type:"move"});return a};a.center=function(i){if(!arguments.length)return u;u=i;g();a.dispatch({type:"move"});return a};a.panBy=function(i){var o=45/Math.pow(2,n+k-3),s=i.x*o;i=i.y*o;return a.center({lon:u.lon+
(C*i-F*s)/j.x,lat:Y(Z(u.lat)+(C*s+F*i)/j.y)})};a.centerRange=function(i){if(!arguments.length)return r;if(r=i){L=r[0].lat>-90?Z(r[0].lat):-Infinity;m=r[0].lat<90?Z(r[1].lat):Infinity}else{L=-Infinity;m=Infinity}g();a.dispatch({type:"move"});return a};a.zoom=function(i){if(!arguments.length)return n+k;n=i;d();return a.center(u)};a.zoomBy=function(i,o,s){if(arguments.length<2)return a.zoom(n+k+i);if(arguments.length<3)s=a.pointLocation(o);n=n+k+i;d();var z=a.locationPoint(s);return a.panBy({x:o.x-z.x,
y:o.y-z.y})};a.zoomRange=function(i){if(!arguments.length)return q;q=i;return a.zoom(n+k)};a.extent=function(i){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var o=a.locationPoint(i[0]),s=a.locationPoint(i[1]),z=Math.max((s.x-o.x)/c.x,(o.y-s.y)/c.y);o=a.pointLocation({x:(o.x+s.x)/2,y:(o.y+s.y)/2});n=n+k-Math.log(z)/Math.LN2;d();return a.center(o)};a.angle=function(i){if(!arguments.length)return w;w=i;A=Math.cos(w);D=Math.sin(w);F=Math.cos(-w);C=Math.sin(-w);
g();a.dispatch({type:"move"});return a};a.add=function(i){i.map(a);return a};a.remove=function(i){i.map(null);return a};a.dispatch=t.dispatch(a);return a};S.maps=[];S.add=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d)return;S.maps.push(d)};S.remove=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d){S.maps.splice(g,1);return}};if(window.addEventListener){window.addEventListener("resize",S,false);window.addEventListener("load",S,false)}t.map.locationCoordinate=function(d){var g=
1/360;return{column:(d.lon+180)*g,row:(180-Z(d.lat))*g,zoom:0}};t.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:Y(180-g*d.row)}};var ba=/WebKit/.test(navigator.userAgent)?-1:0;t.layer=function(d,g){function a(C){for(var L=D[0].nextSibling;A<C;A++){q.insertBefore(D[-4],L);q.insertBefore(D[2],L);q.insertBefore(D[1],L);for(var m=D[-4],r=-4;r<2;)D[r]=D[++r];D[r]=m}}function l(C){for(var L=D[0].nextSibling;A>C;A--){q.insertBefore(D[-1],L);q.insertBefore(D[2],
D[-4]);for(var m=D[2],r=2;r>-4;)D[r]=D[--r];D[r]=m}}function e(){function C(O){var x=O.zoom,E=x<0?1:1<<x,H=O.column%E,J=O.row;if(H<0)H+=E;return{locationPoint:function(K){K=t.map.locationCoordinate(K);var P=Math.pow(2,x-K.zoom);return{x:z.x*(P*K.column-H),y:z.y*(P*K.row-J)}}}}function L(O,x,E){var H=M.zoom,J=2-Q,K=4+Q;for(O=O;O<x;O++){var P=f.load({column:O,row:E,zoom:H},C);if(!P.ready&&!(P.key in G)){P.proxyRefs={};for(var W,X,U,V=1;V<=J;V++){X=true;for(var ca=0,ga=1<<V;ca<=ga;ca++)for(var da=0;da<=
ga;da++)if((U=f.peek(W={column:(O<<V)+da,row:(E<<V)+ca,zoom:H+V}))&&U.ready){G[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U}else X=false;if(X)break}if(!X)for(V=1;V<=K;V++)if((U=f.peek(W={column:O>>V,row:E>>V,zoom:H-V}))&&U.ready){G[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U;break}}G[P.key]=P}}function m(O){return Math.round(O*256)/256}var r=c.map(),v=r.zoom(),i=v-(v=Math.round(v)),o=r.size(),s=r.angle(),z=r.tileSize(),B=r.locationCoordinate(r.center());if(A!=v){if(A<v)a(v);else if(A>
v)l(v);else A=v;for(var y=-4;y<=2;y++){var N=D[y];N.setAttribute("class","zoom"+(y<0?"":"+")+y+" zoom"+(v+y));N.setAttribute("transform","scale("+Math.pow(2,-y)+")")}}var M=r.pointCoordinate(B,$);y=r.pointCoordinate(B,{x:o.x,y:0});v=r.pointCoordinate(B,o);r=r.pointCoordinate(B,{x:0,y:o.y});N=B.column;var T=B.row;B.column=Math.round((Math.round(z.x*B.column)+(o.x&1)/2)/z.x);B.row=Math.round((Math.round(z.y*B.row)+(o.y&1)/2)/z.y);N-=B.column;T-=B.row;var I=m(Math.pow(2,i));q.setAttribute("transform",
"translate("+Math.round(o.x/2-N*z.x*I)+","+Math.round(o.y/2-T*z.y*I)+")"+(s?"rotate("+s/Math.PI*180+")":"")+(i?"scale("+I+")":"")+(w?w.zoomFraction(i):""));if(w){M=w.unapply(M);y=w.unapply(y);v=w.unapply(v);r=w.unapply(r);B=w.unapply(B)}var Q=n?n(M.zoom)-M.zoom:0;if(Q){o=Math.pow(2,Q);M.column*=o;M.row*=o;y.column*=o;y.row*=o;v.column*=o;v.row*=o;r.column*=o;r.row*=o;M.zoom=y.zoom=v.zoom=r.zoom+=Q}i=f.locks();var G={};for(var R in i)i[R].proxyCount=0;if(u&&Q>-5&&Q<3){s=M.zoom<0?1:1<<M.zoom;if(j){fa(M,
y,v,0,s,L);fa(v,r,M,0,s,L)}else{o=Math.floor((M.column+v.column)/2);s=Math.max(0,Math.min(s-1,Math.floor((y.row+r.row)/2)));y=Math.min(4,M.zoom);o=o>>y<<y;s=s>>y<<y;L(o,o+1,s)}}for(R in G){y=G[R];o=m(Math.pow(2,y.level=y.zoom-B.zoom));y.element.setAttribute("transform","translate("+Math.round(y.x=z.x*(y.column-B.column*o))+","+Math.round(y.y=z.y*(y.row-B.row*o))+")")}for(R in i)if(!(R in G)){y=f.unload(R);y.element.parentNode.removeChild(y.element);delete y.proxyRefs}for(R in G){y=G[R];if(y.element.parentNode!=
D[y.level]){D[y.level].appendChild(y.element);c.show&&c.show(y)}}f.flush();c.dispatch({type:"move"})}var c={},f=c.cache=t.cache(d,g).size(512),j=true,u=true,n,k,h,q=t.svg("g"),w,A,D={};q.setAttribute("class","layer");for(var F=-4;F<=-1;F++)D[F]=q.appendChild(t.svg("g"));for(F=2;F>=1;F--)D[F]=q.appendChild(t.svg("g"));D[0]=q.appendChild(t.svg("g"));c.map=function(C){if(!arguments.length)return h;if(h){if(h==C){q.parentNode.appendChild(q);return c}h.off("move",e).off("resize",e);q.parentNode.removeChild(q)}if(h=
C){h.container().appendChild(q);c.init&&c.init(q);h.on("move",e).on("resize",e);e()}return c};c.container=function(){return q};c.levels=function(){return D};c.id=function(C){if(!arguments.length)return k;k=C;q.setAttribute("id",C);return c};c.visible=function(C){if(!arguments.length)return u;(u=C)?q.removeAttribute("visibility"):q.setAttribute("visibility","hidden");h&&e();return c};c.transform=function(C){if(!arguments.length)return w;w=C;h&&e();return c};c.zoom=function(C){if(!arguments.length)return n;
n=typeof C=="function"||C==null?C:function(){return C};h&&e();return c};c.tile=function(C){if(!arguments.length)return j;j=C;h&&e();return c};c.reload=function(){f.clear();h&&e();return c};c.dispatch=t.dispatch(c);c.on("load",function(C){if(C.tile.proxyRefs){for(var L in C.tile.proxyRefs){var m=C.tile.proxyRefs[L];--m.proxyCount<=0&&f.unload(L)&&m.element.parentNode.removeChild(m.element)}delete C.tile.proxyRefs}});return c};t.image=function(){var d=t.layer(function(a){var l=a.element=t.svg("image"),
e=d.map().tileSize();l.setAttribute("preserveAspectRatio","none");l.setAttribute("width",e.x);l.setAttribute("height",e.y);if(typeof g=="function"){l.setAttribute("opacity",0);e=g(a);if(e!=null)a.request=t.queue.image(l,e,function(c){delete a.request;a.ready=true;a.img=c;l.removeAttribute("opacity");d.dispatch({type:"load",tile:a})});else{a.ready=true;d.dispatch({type:"load",tile:a})}}else{a.ready=true;g!=null&&l.setAttributeNS(t.ns.xlink,"href",g);d.dispatch({type:"load",tile:a})}},function(a){a.request&&
a.request.abort(true)}),g;d.url=function(a){if(!arguments.length)return g;g=typeof a=="string"&&/{.}/.test(a)?t.url(a):a;return d.reload()};return d};t.geoJson=function(d){function g(m){var r={lat:0,lon:0};return function(v){r.lat=v[1];r.lon=v[0];var i=m(r);v.x=i.x;v.y=i.y;return i}}function a(m,r){return m&&m.type in D&&D[m.type](m,r)}function l(m,r,v){return m.type in F&&F[m.type](m,r,v)}function e(){var m=c.map().zoom(),r=c.cache.locks(),v,i,o,s,z,B,y;if(w=="fixed")for(v in r){if((i=r[v]).scale!=
m){y="scale("+Math.pow(2,i.zoom-m)+")";s=-1;for(z=(o=i.features).length;++s<z;)l((B=o[s]).data.geometry,B.element,y);i.scale=m}}else for(v in r){s=-1;for(z=(o=(i=r[v]).features).length;++s<z;)l((B=o[s]).data.geometry,B.element,"");delete i.scale}}var c=t.layer(function(m,r){function v(o){var s=[];if(o.next)m.request=d(o.next.href,v);switch(o.type){case "FeatureCollection":for(var z=0;z<o.features.length;z++){var B=o.features[z],y=a(B.geometry,r);y&&s.push({element:i.appendChild(y),data:B})}break;
case "Feature":(y=a(o.geometry,r))&&s.push({element:i.appendChild(y),data:o});break;default:(y=a(o,r))&&s.push({element:i.appendChild(y),data:{type:"Feature",geometry:o}});break}m.ready=true;s.push.apply(m.features,s);c.dispatch({type:"load",tile:m,features:s})}var i=m.element=t.svg("g");m.features=[];r=g(r(m).locationPoint);if(j!=null)m.request=d(typeof j=="function"?j(m):j,v);else v({type:"FeatureCollection",features:A||[]})},function(m){m.request&&m.request.abort(true)}),f=c.container(),j,u=true,
n="org.polymaps."+t.id(),k="url(#"+n+")",h=f.insertBefore(t.svg("clipPath"),f.firstChild),q=h.appendChild(t.svg("rect")),w="auto",A;f.setAttribute("fill-rule","evenodd");h.setAttribute("id",n);if(!arguments.length)d=t.queue.json;var D={Point:function(m,r){var v=r(m.coordinates),i=t.svg("circle");i.setAttribute("r",4.5);i.setAttribute("transform","translate("+v.x+","+v.y+")");return i},MultiPoint:function(m,r){for(var v=t.svg("g"),i=m.coordinates,o,s,z=-1,B=i.length;++z<B;){s=v.appendChild(t.svg("circle"));
s.setAttribute("r",4.5);s.setAttribute("transform","translate("+(o=r(i[z])).x+","+o.y+")")}return v},LineString:function(m,r){for(var v=t.svg("path"),i=["M"],o=m.coordinates,s,z=-1,B=o.length;++z<B;)i.push((s=r(o[z])).x,",",s.y,"L");i.pop();if(i.length){v.setAttribute("d",i.join(""));return v}},MultiLineString:function(m,r){for(var v=t.svg("path"),i=[],o=m.coordinates,s,z=-1,B,y=o.length,N;++z<y;){s=o[z];B=-1;N=s.length;for(i.push("M");++B<N;)i.push((p=r(s[B])).x,",",p.y,"L");i.pop()}if(i.length){v.setAttribute("d",
i.join(""));return v}},Polygon:function(m,r){for(var v=t.svg("path"),i=[],o=m.coordinates,s,z=-1,B,y=o.length,N;++z<y;){s=o[z];B=-1;N=s.length-1;for(i.push("M");++B<N;)i.push((p=r(s[B])).x,",",p.y,"L");i[i.length-1]="Z"}if(i.length){v.setAttribute("d",i.join(""));return v}},MultiPolygon:function(m,r){for(var v=t.svg("path"),i=[],o=m.coordinates,s,z,B=-1,y,N,M=o.length,T,I;++B<M;){s=o[B];y=-1;for(T=s.length;++y<T;){z=s[y];N=-1;I=z.length-1;for(i.push("M");++N<I;)i.push((p=r(z[N])).x,",",p.y,"L");i[i.length-
1]="Z"}}if(i.length){v.setAttribute("d",i.join(""));return v}},GeometryCollection:function(m,r){for(var v=t.svg("g"),i=-1,o=m.geometries,s=o.length,z;++i<s;)(z=a(o[i],r))&&v.appendChild(z);return v}},F={Point:function(m,r,v){m=m.coordinates;r.setAttribute("transform","translate("+m.x+","+m.y+")"+v)},MultiPoint:function(m,r,v){m=m.coordinates;var i=-1,o=s.length;r=r.firstChild;for(var s;++i<o;){s=m[i];r.setAttribute("transform","translate("+s.x+","+s.y+")"+v);r=r.nextSibling}}};c.url=function(m){if(!arguments.length)return j;
j=typeof m=="string"&&/{.}/.test(m)?t.url(m):m;if(j!=null)A=null;typeof j=="string"&&c.tile(false);return c.reload()};c.features=function(m){if(!arguments.length)return A;if(A=m){j=null;c.tile(false)}return c.reload()};c.clip=function(m){if(!arguments.length)return u;u&&f.removeChild(h);if(u=m)f.insertBefore(h,f.firstChild);var r=c.cache.locks();for(var v in r)u?r[v].element.setAttribute("clip-path",k):r[v].element.removeAttribute("clip-path");return c};var C=c.tile;c.tile=function(m){arguments.length&&
!m&&c.clip(m);return C.apply(c,arguments)};var L=c.map;c.map=function(m){if(m&&q){var r=m.tileSize();q.setAttribute("width",r.x);q.setAttribute("height",r.y)}return L.apply(c,arguments)};c.scale=function(m){if(!arguments.length)return w;(w=m)?c.on("move",e):c.off("move",e);c.map()&&e();return c};c.show=function(m){u?m.element.setAttribute("clip-path",k):m.element.removeAttribute("clip-path");c.dispatch({type:"show",tile:m,features:m.features});return c};c.reshow=function(){var m=c.cache.locks();for(var r in m)c.show(m[r]);
return c};return c};t.dblclick=function(){function d(c){var f=l.zoom();f=c.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);a==="mouse"?l.zoomBy(f,l.mouse(c)):l.zoomBy(f)}var g={},a="mouse",l,e;g.zoom=function(c){if(!arguments.length)return a;a=c;return g};g.map=function(c){if(!arguments.length)return l;if(l){e.removeEventListener("dblclick",d,false);e=null}if(l=c){e=l.container();e.addEventListener("dblclick",d,false)}return g};return g};t.drag=function(){function d(f){if(!f.shiftKey){c={x:f.clientX,
y:f.clientY};l.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(f){if(c){l.panBy({x:f.clientX-c.x,y:f.clientY-c.y});c.x=f.clientX;c.y=f.clientY}}var a={},l,e,c;a.map=function(f){if(!arguments.length)return l;if(l){e.removeEventListener("mousedown",d,false);e=null}if(l=f){e=l.container();e.addEventListener("mousedown",d,false)}return a};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",function(f){if(c){g(f);
c=null;document.body.style.removeProperty("cursor")}},false);return a};t.wheel=function(){function d(){f=null}function g(h){var q=h.wheelDelta||-h.detail,w;if(q)if(e){try{k.scrollTop=1E3;k.dispatchEvent(h);q=1E3-k.scrollTop}catch(A){}q*=0.0050}else{w=Date.now();if(w-l>200){q=q>0?+1:-1;l=w}else q=0}if(q)switch(c){case "mouse":w=j.mouse(h);f||(f=j.pointLocation(w));j.off("move",d).zoomBy(q,w,f).on("move",d);break;case "location":j.zoomBy(q,j.locationPoint(f),f);break;default:j.zoomBy(q);break}h.preventDefault();
return false}var a={},l=0,e=true,c="mouse",f,j,u,n=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";n.style.height="2000px";k.appendChild(n);document.body.appendChild(k);a.smooth=function(h){if(!arguments.length)return e;e=h;return a};a.zoom=function(h,q){if(!arguments.length)return c;c=h;f=q;if(j)c=="mouse"?j.on("move",d):j.off("move",d);return a};a.map=function(h){if(!arguments.length)return j;
if(j){u.removeEventListener("mousemove",d,false);u.removeEventListener("mousewheel",g,false);u.removeEventListener("MozMousePixelScroll",g,false);u=null;j.off("move",d)}if(j=h){c=="mouse"&&j.on("move",d);u=j.container();u.addEventListener("mousemove",d,false);u.addEventListener("mousewheel",g,false);u.addEventListener("MozMousePixelScroll",g,false)}return a};return a};t.arrow=function(){function d(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var A=Date.now(),D=0,F=0;switch(w.keyCode){case 37:if(!c.left){f=
A;c.left=1;c.right||(D=k)}break;case 39:if(!c.right){f=A;c.right=1;c.left||(D=-k)}break;case 38:if(!c.up){f=A;c.up=1;c.down||(F=k)}break;case 40:if(!c.down){f=A;c.down=1;c.up||(F=-k)}break;default:return}if(D||F)h.panBy({x:D,y:F});if(!j&&c.left|c.right|c.up|c.down)j=setInterval(l,n);w.preventDefault()}}function g(w){f=Date.now();switch(w.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(j&&!(c.left|c.right|c.up|c.down))j=clearInterval(j);
w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:h.zoom(Math.ceil(h.zoom())-1);break;case 43:case 61:h.zoom(Math.floor(h.zoom())+1);break;default:return}w.preventDefault()}function l(){if(h)if(!(Date.now()<f+u)){var w=(c.left-c.right)*k,A=(c.up-c.down)*k;if(w||A)h.panBy({x:w,y:A})}}var e={},c={left:0,right:0,up:0,down:0},f=0,j,u=250,n=50,k=16,h,q;e.map=function(w){if(!arguments.length)return h;if(h){q.removeEventListener("keypress",a,false);q.removeEventListener("keydown",d,false);
q.removeEventListener("keyup",g,false);q=null}if(h=w){q=h.focusableParent();q.addEventListener("keypress",a,false);q.addEventListener("keydown",d,false);q.addEventListener("keyup",g,false)}return e};e.speed=function(w){if(!arguments.length)return k;k=w;return e};return e};t.hash=function(){function d(){var j=f(e);if(l!==j)location.replace(l=j)}function g(){if(location.hash!==l)if(c(e,(l=location.hash).substring(1)))d()}var a={},l,e,c=function(j,u){var n=u.split("/").map(Number);if(n.length<3||n.some(isNaN))return true;
else{var k=j.size();j.zoomBy(n[0]-j.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,n[1])),lon:n[2]})}},f=function(j){var u=j.center();j=j.zoom();var n=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+j.toFixed(2)+"/"+u.lat.toFixed(n)+"/"+u.lon.toFixed(n)};a.map=function(j){if(!arguments.length)return e;if(e){e.off("move",d);window.removeEventListener("hashchange",g,false)}if(e=j){e.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return a};
a.parser=function(j){if(!arguments.length)return c;c=j;return a};a.formatter=function(j){if(!arguments.length)return f;f=j;return a};return a};t.touch=function(){function d(n){var k=-1,h=n.touches.length,q=Date.now();if(h==1&&q-c<300){var w=a.zoom();a.zoomBy(1-w+Math.floor(w),a.mouse(n.touches[0]));n.preventDefault()}c=q;f=a.zoom();for(j=a.angle();++k<h;){q=n.touches[k];u[q.identifier]=a.pointLocation(a.mouse(q))}}var g={},a,l,e=false,c=0,f,j,u={};window.addEventListener("touchmove",function(n){switch(n.touches.length){case 1:var k=
n.touches[0];a.zoomBy(0,a.mouse(k),u[k.identifier]);n.preventDefault();break;case 2:k=n.touches[0];var h=n.touches[1],q=a.mouse(k),w=a.mouse(h);q={x:(q.x+w.x)/2,y:(q.y+w.y)/2};k=t.map.locationCoordinate(u[k.identifier]);h=t.map.locationCoordinate(u[h.identifier]);h=t.map.coordinateLocation({row:(k.row+h.row)/2,column:(k.column+h.column)/2,zoom:0});a.zoomBy(Math.log(n.scale)/Math.LN2+f-a.zoom(),q,h);e&&a.angle(n.rotation/180*Math.PI+j);n.preventDefault();break}},false);g.rotate=function(n){if(!arguments.length)return e;
e=n;return g};g.map=function(n){if(!arguments.length)return a;if(a){l.removeEventListener("touchstart",d,false);l=null}if(a=n){l=a.container();l.addEventListener("touchstart",d,false)}return g};return g};t.interact=function(){var d={},g=t.drag(),a=t.wheel(),l=t.dblclick(),e=t.touch(),c=t.arrow();d.map=function(f){g.map(f);a.map(f);l.map(f);e.map(f);c.map(f);return d};return d};t.compass=function(){function d(x){C.setAttribute("class","compass active");N||(N=setInterval(g,o));M&&G.panBy(M);v=Date.now();
return k(x)}function g(){M&&Date.now()>v+i&&G.panBy(M)}function a(x){if(x.shiftKey){I={x0:G.mouse(x)};G.focusableParent().focus();return k(x)}}function l(x){if(I){I.x1=G.mouse(x);Q.setAttribute("x",Math.min(I.x0.x,I.x1.x));Q.setAttribute("y",Math.min(I.x0.y,I.x1.y));Q.setAttribute("width",Math.abs(I.x0.x-I.x1.x));Q.setAttribute("height",Math.abs(I.x0.y-I.x1.y));Q.removeAttribute("display")}}function e(){C.setAttribute("class","compass");if(I){if(I.x1){G.extent([G.pointLocation({x:Math.min(I.x0.x,
I.x1.x),y:Math.max(I.x0.y,I.x1.y)}),G.pointLocation({x:Math.max(I.x0.x,I.x1.x),y:Math.min(I.x0.y,I.x1.y)})]);Q.setAttribute("display","none")}I=null}if(N){clearInterval(N);N=0}}function c(x){return function(){x?this.setAttribute("class","active"):this.removeAttribute("class");M=x}}function f(x){return function(E){C.setAttribute("class","compass active");var H=G.zoom();G.zoom(x<0?Math.ceil(H)-1:Math.floor(H)+1);return k(E)}}function j(x){return function(E){G.zoom(x);return k(E)}}function u(){this.setAttribute("class",
"active")}function n(){this.removeAttribute("class")}function k(x){x.stopPropagation();x.preventDefault();return false}function h(x){var E=Math.SQRT1_2*m,H=m*0.7,J=m*0.2,K=t.svg("g"),P=K.appendChild(t.svg("path")),W=K.appendChild(t.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d","M0,0L"+E+","+E+"A"+m+","+m+" 0 0,1 "+-E+","+E+"Z");W.setAttribute("class","chevron");W.setAttribute("d","M"+J+","+(H-J)+"L0,"+H+" "+-J+","+(H-J));W.setAttribute("pointer-events",
"none");K.addEventListener("mousedown",d,false);K.addEventListener("mouseover",c(x),false);K.addEventListener("mouseout",c(null),false);K.addEventListener("dblclick",k,false);return K}function q(x){var E=m*0.4,H=E/2,J=t.svg("g"),K=J.appendChild(t.svg("path")),P=J.appendChild(t.svg("path")),W=J.appendChild(t.svg("path")),X=J.appendChild(t.svg("path"));K.setAttribute("class","back");K.setAttribute("d","M"+-E+",0V"+-E+"A"+E+","+E+" 0 1,1 "+E+","+-E+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",
K.getAttribute("d"));W.setAttribute("class","chevron");W.setAttribute("d","M"+-H+","+-E+"H"+H+(x>0?"M0,"+(-E-H)+"V"+-H:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",K.getAttribute("d"));J.addEventListener("mousedown",f(x),false);J.addEventListener("mouseover",u,false);J.addEventListener("mouseout",n,false);J.addEventListener("dblclick",k,false);return J}function w(x){var E=m*0.2,H=m*0.4,J=t.svg("g"),K=J.appendChild(t.svg("rect")),P=J.appendChild(t.svg("path"));
K.setAttribute("pointer-events","all");K.setAttribute("fill","none");K.setAttribute("x",-H);K.setAttribute("y",-0.75*H);K.setAttribute("width",2*H);K.setAttribute("height",1.5*H);P.setAttribute("class","chevron");P.setAttribute("d","M"+-E+",0H"+E);J.addEventListener("mousedown",j(x),false);J.addEventListener("dblclick",k,false);return J}function A(){var x=m+6,E=x,H=G.size();switch(s){case "top-left":break;case "top-right":x=H.x-x;break;case "bottom-left":E=H.y-E;break;case "bottom-right":x=H.x-x;
E=H.y-E;break}C.setAttribute("transform","translate("+x+","+E+")");Q.setAttribute("transform","translate("+-x+","+-E+")");for(var J in L)J==G.zoom()?L[J].setAttribute("class","active"):L[J].removeAttribute("class")}function D(){for(;C.lastChild;)C.removeChild(C.lastChild);C.appendChild(Q);if(y!="none"){T=C.appendChild(t.svg("g"));T.setAttribute("class","pan");var x=T.appendChild(t.svg("circle"));x.setAttribute("class","back");x.setAttribute("r",m);T.appendChild(h({x:0,y:-r})).setAttribute("transform",
"rotate(0)");T.appendChild(h({x:r,y:0})).setAttribute("transform","rotate(90)");T.appendChild(h({x:0,y:r})).setAttribute("transform","rotate(180)");T.appendChild(h({x:-r,y:0})).setAttribute("transform","rotate(270)");x=T.appendChild(t.svg("circle"));x.setAttribute("fill","none");x.setAttribute("class","fore");x.setAttribute("r",m)}else T=null;if(z!="none"){B=C.appendChild(t.svg("g"));B.setAttribute("class","zoom");x=-0.5;if(z=="big"){L={};var E=G.zoomRange()[0];for(x=0;E<=G.zoomRange()[1];E++,x++)(L[E]=
B.appendChild(w(E))).setAttribute("transform","translate(0,"+-(x+0.75)*m*0.4+")")}E=y=="none"?0.4:2;B.setAttribute("transform","translate(0,"+m*(/^top-/.test(s)?E+(x+0.5)*0.4:-E)+")");B.appendChild(q(+1)).setAttribute("transform","translate(0,"+-(x+0.5)*m*0.4+")");B.appendChild(q(-1)).setAttribute("transform","scale(-1)")}else B=null;A()}var F={},C=t.svg("g"),L={},m=30,r=16,v=0,i=250,o=50,s="top-left",z="small",B,y="small",N,M,T,I,Q=t.svg("rect"),G,R,O;C.setAttribute("class","compass");Q.setAttribute("class",
"back fore");Q.setAttribute("pointer-events","none");Q.setAttribute("display","none");F.radius=function(x){if(!arguments.length)return m;m=x;G&&D();return F};F.speed=function(x){if(!arguments.length)return m;r=x;return F};F.position=function(x){if(!arguments.length)return s;s=x;G&&D();return F};F.pan=function(x){if(!arguments.length)return y;y=x;G&&D();return F};F.zoom=function(x){if(!arguments.length)return z;z=x;G&&D();return F};F.map=function(x){if(!arguments.length)return G;if(G){R.removeEventListener("mousedown",
a,false);R.removeChild(C);R=null;O.removeEventListener("mousemove",l,false);O.removeEventListener("mouseup",e,false);O=null;G.off("move",A).off("resize",A)}if(G=x){R=G.container();R.appendChild(C);R.addEventListener("mousedown",a,false);O=R.ownerDocument.defaultView;O.addEventListener("mousemove",l,false);O.addEventListener("mouseup",e,false);G.on("move",A).on("resize",A);D()}return F};return F};t.grid=function(){function d(){var e=l.firstChild,c=a.size(),f=a.pointLocation($);a.pointLocation(c);var j=
Math.pow(2,4-Math.round(a.zoom()));f.lat=Math.floor(f.lat/j)*j;f.lon=Math.ceil(f.lon/j)*j;for(var u;(u=a.locationPoint(f).x)<=c.x;f.lon+=j){e||(e=l.appendChild(t.svg("line")));e.setAttribute("x1",u);e.setAttribute("x2",u);e.setAttribute("y1",0);e.setAttribute("y2",c.y);e=e.nextSibling}for(;(u=a.locationPoint(f).y)<=c.y;f.lat-=j){e||(e=l.appendChild(t.svg("line")));e.setAttribute("y1",u);e.setAttribute("y2",u);e.setAttribute("x1",0);e.setAttribute("x2",c.x);e=e.nextSibling}for(;e;){c=e.nextSibling;
l.removeChild(e);e=c}}var g={},a,l=t.svg("g");l.setAttribute("class","grid");g.map=function(e){if(!arguments.length)return a;if(a){l.parentNode.removeChild(l);a.off("move",d).off("resize",d)}if(a=e){a.on("move",d).on("resize",d);a.container().appendChild(l);a.dispatch({type:"move"})}return g};return g};t.stylist=function(){function d(e){var c=e.features.length,f=g.length,j=a.length,u,n,k,h,q,w;for(q=0;q<c;++q)if(n=(u=e.features[q]).element){u=u.data;for(w=0;w<f;++w){h=(k=g[w]).value;if(typeof h===
"function")h=h.call(null,u);h==null?k.name.local?n.removeAttributeNS(k.name.space,k.name.local):n.removeAttribute(k.name):k.name.local?n.setAttributeNS(k.name.space,k.name.local,h):n.setAttribute(k.name,h)}for(w=0;w<j;++w){h=(k=a[w]).value;if(typeof h==="function")h=h.call(null,u);h==null?n.style.removeProperty(k.name):n.style.setProperty(k.name,h,k.priority)}if(h=l){if(typeof h==="function")h=h.call(null,u);for(;n.lastChild;)n.removeChild(n.lastChild);h!=null&&n.appendChild(t.svg("title")).appendChild(document.createTextNode(h))}}}
var g=[],a=[],l;d.attr=function(e,c){g.push({name:ha(e),value:c});return d};d.style=function(e,c,f){a.push({name:e,value:c,priority:arguments.length<3?null:f});return d};d.title=function(e){l=e;return d};return d}})(org.polymaps);
